
// Generated by MyGeneration Version # (1.3.0.3)

using System;
using DAL;
namespace BLL
{
	public class ItemPrefferedLocation : _ItemPrefferedLocation
	{
		public ItemPrefferedLocation()
		{
		
		}

        public bool IsPreferedPalleteLocation(int PalletLocationID, int itemID)
        {
            this.FlushData();
            this.LoadFromRawSql(String.Format("select * from ItemPrefferedLocation where PalletLocationID = {0} and ItemID = {1}", PalletLocationID, itemID));
            return (this.RowCount > 0);
        }

        public void LoadByRackID(int id)
        {
            this.FlushData();
            this.LoadFromRawSql(String.Format("select * from ItemPrefferedLocation where PalletLocationID = {0}", id));
        }

        public void LoadByItemID(int id)
        { 
            this.FlushData();
            //this.LoadFromRawSql(String.Format("select ipr.*,pl.Label from ItemPrefferedLocation ipr join PalletLocation pl on pl.ID = ipr.PalletLocationID where ItemID = {0}", id));
        }

        public void SaveNewItemPreferredRack(int itemId, int palletLocation, bool isFixed)
        {
            this.FlushData();

            this.LoadFromRawSql(String.Format("select * from ItemPrefferedLocation where ItemID = {0} and PalletLocationID={1}", itemId, palletLocation));
            if (this.RowCount == 0)
            {
                this.AddNew();
                this.PalletLocationID = palletLocation;
                this.ItemID = itemId;
                
            }
            IsFixed = isFixed;
            this.Save();
        }
    }
}
