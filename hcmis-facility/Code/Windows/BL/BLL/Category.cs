
// Generated by MyGeneration Version # (1.3.0.3)

using System;
using DAL;
using System.Data;

namespace BLL
{
	public class Category : _Category
	{
		public Category()
		{
		
		}

        public DataTable TheDataTable
        {
            get { return this.DataTable; }
        }
        /***
         * Concatinates C on category and S on sub category
         * */
        public DataTable GetCategoryTree()
        {
            DataTable tbl;
            string query = String.Format("select 'C' + cast(ID as varchar) as ID , CategoryName Name, 'P999' Parent  from Category order by Name");
            this.LoadFromRawSql(query);
            tbl = this.DataTable;
            
            query = String.Format("select 'S' + cast(ID as varchar) as ID , SubCategoryName Name, 'C' + cast(CategoryId as varchar) Parent  from SubCategory");
            this.LoadFromRawSql(query);
            tbl.Merge(this.DataTable);

            DataRow r = tbl.NewRow();
            r["ID"] = "P999";
            r["Name"] = "All Items";
            tbl.Rows.Add(r);
            return tbl;
        }
	}
}
